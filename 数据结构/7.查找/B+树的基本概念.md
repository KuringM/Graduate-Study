# B+树的基本概念

## B+树的定义

一棵**m阶的B+树**需满足下列条件:

1. 每个分支结点最多有m棵子树(孩子结点).
2. 非叶根结点至少有两棵子树, 其他每个分支结点至少有 $\lceil \frac{m}{2} \rceil$ 棵子树.
3. ==结点的子树个数与关键字个数相等==.
4. 所有==叶结点包含全部关键字==及指向相应记录的指针, 叶结点中将关键字按大小顺序排列, 并且==相邻叶结点按大小顺序相互链接起来==.
   > 支持顺序查找
5. 所有分支结点中仅包含它的各个子结点中关键字的最大值及指向其子结点的指针.

![[Pasted image 20250904221423.png]]

## B+树的查找

对比: 分块查找

多路查找: 从根出发

- B+树中, 无论查找成功与否, 最终一定都要走到最下面一层结点

顺序查找

## B+树 VS B树

B树:
![[Pasted image 20250904164410.png]]

|                                                 B树                                                 |                                                                           B+树                                                                            |
| :-------------------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------: |
|                                   结点中的n个关键字对应n+1棵子树                                    |                                                               结点中的n个关键字对应n棵子树                                                                |
| 根节点的关键字数$n \in [1, m-1]$, <BR> 其他结点的关键字数$n \in [\lceil \frac{m}{2} \rceil-1, m-1]$ |                               根节点的关键字数$n \in [1, m]$, <BR> 其他结点的关键字数$n \in [\lceil \frac{m}{2} \rceil, m]$                               |
|                               在B树中, 各结点中包含的关键字是不重复的                               |                                        在B+树中, 叶结点包含全部关键字, 非叶结点中出现过的关键字也会出现在叶结点中                                         |
|                            B树的结点中都包含了关键字对应的记录的存储地址                            | 在B+树中, 叶结点包含信息, 所有非叶结点仅起索引作用, 非叶结点中的每个索引项只含有对应子树的最大关键字和指向该子树的指针, 不含有该关键字对应记录的存储地址. |

在B+树中, 非叶结点不含有该关键字对应记录的存储地址. <BR>
可以使一个磁盘块可以包含更多个关键字, 使得B+树的阶更大, 树高更矮,读磁盘次数更少, 查找更快.

- 典型应用: 关系型数据库的"索引"(如MySQL)

## 总结

![[Pasted image 20250904223751.png]]

