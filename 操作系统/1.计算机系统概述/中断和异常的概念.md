# 中断和异常的概念

## 中断的作用

CPU 上会运行两种程序, 一种是**操作系统内核程序(是整个系统的管理者)**, 一种是**应用程序**.

"中断"会使CPU由用户态变为内核态, 使操作系统重新夺回对CPU的控制权

在合适的情况下, 操作系统内核会把CPU的使用权主动让给应用程序(第二章进程管理相关内容)

> "中断"是让操作系统内核夺回CPU使用权的唯一途径.

## 中断的类型

![[截屏2025-09-08 14.57.27.png]]

- 内中断: 与当前执行的指令有关, 中断信号来源于CPU内部
  - 故障(Fault): 若当前执行的指令是非法的, 则会引发一个中断信号.
  - 自陷(Trap): 有时候应用程序想请求操作系统内核的服务, 此时会执行一条特殊的指令 -- 陷入指令, 该指令会引发一个内部中断信号.
- 外中断: 与当前执行的指令无关, 中断信号来源于CPU外部

## 中断机制的基本原理

- 检测中断信号
  - 不同的中断信号, 需要用不同的中断处理程序来处理.
- 找到相应的中断处理程序
  - 当CPU检测到中断信号后, 会根据中断信号的类型去查询"中断向量表",以此来找到相应的中断处理程序在内存中的存放位置.
