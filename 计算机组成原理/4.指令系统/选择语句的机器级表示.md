# 选择语句的机器级表示

> 注:Intel x86 处理器中程序计数器 PC (Program Counter) 通常被称为 IP(Instruction Pointer)

## 无条件转移指令--jump

`jmp <Address>` : PC 无条件跳转至`<Address>`

- `jmp 128`: <地址>可以用常数给出
- `jmp eax`: <地址>可以来自于寄存器
- `jmp [999]`: <地址>可以来自于主存
- `jmp NEXT`: <地址>可以用"标号"锚定. 如`NEXT:`, 用特征符号"冒号"来锚定

## 条件转移指令--jxxx

> ALU每次运算的标志位都自动存入PSW 程序状态字寄存器(Intel 称其为"标志寄存器")
>
> - OF(Overflow Flag)溢出标志. 溢出时为1,否则置0.
> - SF(Sign Flag)符号标志. 结果为负时置1,否则置0.
> - ZF(Zero Flag)零标志, 运算结果为0时ZF位置1,否则置0.
> - CF(Carry Flag)进位/借位标志, 进位/借位时置1,否则置0

- `cmp a, b`: 比较a和b(本质上是进行 a-b 减法运算, 并生成标志位OF、ZF、CF、SF)
- `je <A>`: jump when equal, 若`a==b(ZF==1)`, 则跳转
- `jne <A>`: jump when not equal, 若`a!=b(ZF!=0)`, 则跳转
- `jg <A>`: jump when greater than, 若`a>b(ZF == 0 && SF == OF)`, 则跳转
- `jge <A>`: jump when greater than or equal to, 若`a>=b( SF==OF )`, 则跳转
- `jl <A>`: jump when less then, 若`a<b(SF != OF)`, 则跳转
- `jle <A>`: jump when less then and equal to, 若`a<=b(SF!= OF || ZF ==1)`, 则跳转

E.G:

```asm
# if(a>b) { c=a; }
# else { c=b; }
mov eax, 7  # 假设变量a=7, 存入eax
mov ebx, 6  # 假设变量b=6, 存入ebx
cmp eax,ebx # 比较变量a和b
jg NEXT     # 若a>b, 转移到NEXT:
mov ecx,ebx # 假设用ecx存储变量c, 令c=b (if部分的逻辑)
jmp END     # 无条件转移到END:
NEXT:
mov ecx,eax # 假设用ecx存储变量c, 令c=a, (else 部分的逻辑)
END :
```
