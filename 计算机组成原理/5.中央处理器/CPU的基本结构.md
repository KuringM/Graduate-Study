# CPU的基本结构

CPU = 运算器 + 控制器 或 CPU = 数据通路 + 控制部件.

![[截屏2025-08-22 15.41.10.png]]

## 1. 运算器

功能: 对数据进行加工.

### 基本结构

1. 算术逻辑单元(ALU):主要功能是进行算术/逻辑运算.
2. 通用寄存器组(GPRs):如x86的AX(AH+AL)、BX、CX、DX、SP等, 用于存放操作数(包括源操作数、目的操作数及中间结果)和各种地址信息等. <BR>
   SP是堆栈指针, 用于指示栈顶的地址.
3. 暂存寄存器: 用于暂存从主存读来的数据, 这个数据不能存放在通用寄存器中, 否则会破坏其原有内容.
   如:两个操作数分别来自主存和R0 , 最后结果存回R0 , 那么从主存中取来的操作数直接放入暂存器, 就不会破坏运算前R0的内容.
4. 累加寄存器:它是一个通用寄存器, 用于暂时存放ALU运算的结果信息, 用于实现加法运算.
5. 程序状态字寄存器(PSW):保留由算术逻辑运算指令或测试指令的结果而建立的各种状态信息, 如溢出标志(OP)、符号标志(SF)、零标志(ZF)、进位标志(CF)等. PSW中的这些位参与并决定微操作的形成.
6. 移位器:对运算结果进行移位运算.
7. 计数器:控制乘除运算的操作步数.

ALU与寄存器间采用**专用数据通路方式**:根据指令执行过程中的数据和地址的流动方向安排连接线路.
性能较高, 基本不存在数据冲突现象, 但结构复杂, 硬件量大, 不易实现.

> 如果直接用导线连接, 相当于多个寄存器同时并且一直向ALU传输数据, 那么仅让单个寄存器传输数据的方法:
>
> - 解决方法1. 使用**多路选择器**
> - 解决方法2. 使用**三态门**, 可以控制每一路是否输出.如:R0out为1时R0中的数据输出到A端, R0R0out为0时R0中的数据无法输出到A端.

CPU内部采用**单总线方式**:将所有寄存器的输入端和输出端都连接到一条公共的通路上.
结构简单, 容易实现, 但数据传输存在较多**冲突**的现象, 性能较低.

> 设置暂存寄存器解决冲突.

## 2. 控制器

### 功能

协调并控制计算机各部件执行程序的指令序列,基本功能包括取指令、分析指令、执行指令.

- 取指令:自动形成指令地址;自动发出取指令的命令.
- 分析指令:操作码译码(分析本条指令要完成什么操作);产生操作数的有效地址.
- 执行指令:根据分析指令得到的"操作命令"和"操作数地址", 形成操作信号控制序列, 控制运算器、存储器以及I/O. 设备完成相应的操作.
- 中断处理:管理总线及输入输出;处理异常情况(如掉电)和特殊请求(如打印机请求打印一行字符).

### 基本结构

1. 程序计数器:用于指出下一条指令在主存中的存放地址. CPU就是根据PC的内容去主存中取指令的. 因程序中指令(通常)是顺序执行的, 所以PC有自增功能.
2. 指令寄存器:用于保存当前正在执行的那条指令.
3. 指令译码器:仅对操作码字段进行译码, 向控制器
4. 微操作信号发生器:根据IR的内容(指令)、PSW的内容(状态信息)及时序信号, 产生控制整个计算机系统所需的各种控制信号, 其结构有组合逻辑型和存储逻辑型两种.
5. 时序系统:用于产生各种时序信号, 它们都是由统一时钟(CLOCK)分频得到.
6. 存储器地址寄存器(MAR):用于存放所要访问的主存单元的地址.
7. 存储器数据寄存器(MDR):用于存放向主存写入的信息或从主存中读出的信息.
