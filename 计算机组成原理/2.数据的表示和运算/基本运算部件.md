# 基本运算部件

在计算机中, 运算器由算术逻辑单元(ArithmeticLogicUnit,ALU)、移位器、状态奇⾏器(PSW)和通用寄存器组等组成.

运算器的基本功能包括加、减、乘、除四则运算, 与、或、⾮、异或等逻辑运算, 以及移位、求补等操作, ALU的核⼼部件是加法器.

## 1. 一位全加器(FA)

- FA(Full Adder)是最基本的加法单元, 仅支持1 bit加法
- input: 加数$A_i$加数$B_i$低位传来的进位$C_{i-1}$
- output: 本位和 $S_i$, 向高位的进位 $C_i$
- 和表达式: $S_i = A_i \oplus B_i \oplus C_i$
- 进位表达式: $C_i = A_i B_i + (A_i \oplus B_i)C_{i-1}$

> $\oplus$表示异或

![[Pasted image 20250817040915.png]]

## 2. 串行进位加法器

- 串⾏进位加法器:把n个FA相连得到的n位加法器
- 每级进位直接依赖于前⼀级的进位, 进位信号是逐级形成的
- 最⻓运算时间主要由进位信号的传递时间决定

![[Pasted image 20250817041227.png]]

进位信息是串行产生的, 计算速度取决于进位产生和传递的速度. 位数越多, 运算速度越慢.

> 注1:电信号到达稳态需要一定时间, 因此进位产生速度会有延迟.
> 注2:串行进位又称为行波进位, 每一级进位直接依赖于前一级的进位, 即进位信号是逐级形成的.

由于两个输入端允许**并行输入 n bit**, 因此这种加法器属于:**并行加法器**.
由于**进位信息是串行产生的**, 因此从"进位方式"看, 这种加法器属于:**串行进位加法器**
综上, 很多教材把这种加法器称为"串行进位的并行加法器"

## 3. 并行进位加法器\*

所有进位信息都是同时产生的, 几乎没有延迟.

特点:运算速度比"串行进位的并行加法器"更快.

![[Pasted image 20250817041742.png]]

- 进位信号$G_i = A_i B_i$, 进位传递信号$P_i = A_i \oplus B_i$
- 进位表达式 $C*i =G_i + P_i C*{i-1}$
- $C_i$仅与$A_i, B_i$和最低进位$C_0$有关, 互间的进位没有依赖关系
- CLA(超前进位部件)是实现上述表达式的部件
- 这种进位⽅式快速, 与位数⽆关, 当位数多时采⽤全先⾏进位是不现实的
- 采⽤并⾏进位的⽬的是: 提⾼加法器运算速度
- 通常采⽤两级或多级先⾏进位加法器

## 4. 带标志位的加法器

![[Pasted image 20250817042556.png]]

- 不仅能计算和/差, 还能生成相应的标志信息
- 为了加快加法运算的速度, 实际电路⼀定使⽤多级先⾏进位⽅式
- **OF(Overflow Flag)溢出标志**,$OF= C_n \oplus C_{n-1}$用于判断带符号数加减运算是否溢出. **OF=1 溢出;OF=0 未溢出**
- **SF(Sign Flag)符号标志**, $SF=F_{n-1}$用于判断带符号数加减运算结果的正负性. **SF=1 结果为负;SF=0 结果为正**
- **ZF(Zero Flag)零标志**, 用于判断加减运算结果是否为0. **ZF=1 表示结果为0;ZF=0 表示结果不为0**
- **CF(Carry Flag)进位/借位标志**,$CF=C_{out}\oplus C_{in}$用于判断无符号数加减运算是否溢出. **CF=1 溢出;CF=0 未溢出**
- $A-B<0$时, CF=1;溢出时OF=1

### 标志位的生成

- $OF = C_n \oplus C_{n-1}$: 即最高位的进位 $\oplus$ 次高位的进位. 反映带符号数加减运算是否溢出.
- $SF = S_n$: 也就是取运算结果的最高位(符号位). 反映带符号数加减运算的正负性.
- $ZF = \overline{ S_n+\cdots +S_2+S_1}$: 仅当运算结果所有 bit 全0时, ZF才为1, 此时表示运算结果为0.
- $CF = C_{out} \oplus C_{in} = C_n \oplus C_0$-反映无符号数加减运算是否溢出.

## 5. 算数逻辑单元

![[Pasted image 20250817044301.png]]

- ALU的核⼼是带标志加法器
- ALU是功能强⼤的组合逻辑电路, 能进⾏算术运算, 逻辑运算, 移位操作
- ALUop是操作控制端, 决定ALU所执⾏的处理操作
- ALUop的位数m决定了操作的种类数k($m \geqslant ]\log_2 k]$), 即位数为3时, 有$2^3 =8$种操作
- 在ALUop的控制下, 由⼀个多路选择器MUX选择输出某种操作结果
- MUX是多路选择开关, 它从多个输⼊信号中选择⼀个送到输出端
