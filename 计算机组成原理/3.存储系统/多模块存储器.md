> 提升主存速度

# 双端口RAM

作用:优化多核CPU访问一根内存条的速度.

需要有两组完全独立的数据线、地址线、控制线.
CPU、RAM中也要有更复杂的控制电路.

两个端口对同一主存操作有以下4种情况:

1. 两个端口同时对不同的地址单元存取数据.
2. 两个端口同时对同一地址单元读出数据.
3. 两个端口同时对同一地址单元写入数据. 导致写入错误.
4. 两个端口同时对同一地址单元, 一个写入数据, 另一个读出数据. 导致读出错误.

解决错误方法:
置"忙"(BUSY)信号为0,由判断逻辑决定暂时关闭一个端口(即被延时),
未被关闭的端口正常访问, 被关闭的端口延长一个很短的时间段后再访问.

# 多模块存储器

## 单体多字存储器

每个存储单元存储m个字, 总线宽度也为m个字, 一次并行读出m个字, 每次只能同时取m个字, 不能单独取其中某个字.

指令和数据在主存内必须是连续存放的.

## 多体并行存储器

每个模块都有相同的容量和存取速度.
各模块都有独立的读写控制电路、地址寄存器和数据寄存器. 它们既能并行工作, 又能交叉工作.

### 高位交叉编址的多体存储器

高位地址为模块号(体号), 低位地址为模块内地址(体内地址).

理论上多个存储体可以被并行访问, 但是由于通常会连续访问, 因此实际效果相当于单纯的扩容.

- 读取地址连续的n个存储字, 时间开销为 $nT$

### 低位交叉编址的多体存储器

低位地址为模块号, 高位地址为模块内地址.

- 轮流启动方式: 模块的存取周期为T; 总线周期为r.
- 读取地址连续的n个存储字, 时间开销为 $T+(n-1)r$

采用"流水线"的方式并行存取(宏观上并行, 微观上串行) <BR>
宏观上, 一个存储周期内, m体交叉存储器可以提供的数据量为单个模块的m倍.

存取周期为T, **存取时间为r**, 为了使流水线不间断, 应保证模块数 $m \geqslant \frac{T}{r}$ <BR>
存取周期为T, **总线传输周期为r**, 为了使流水线不间断, 应保证模块数 $m \geqslant \frac{T}{r}$

每个存储周期内可读写地址连续的m个字.

微观上, m个模块被串行访问; 宏观上, 每个存取周期内所有模块被并行访问.

---

如何插入内存条, 实现高位交叉的多体存储器(相当于单纯的扩容)?
如何插入内存条, 实现低位交叉的多体存储器(俗称"双通道")?

Tips:买内存条时, 可挑选相同主频、相同容量的两根来组成双通道.
