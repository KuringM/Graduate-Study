# 磁盘存储器

计算机的外存储器又称为辅助存储器, 目前主要使用**磁表面存储器**.
所谓"磁表面存储", 是指把某些磁性材料薄薄地涂在金属铝或塑料表面上作为载磁体来存储信息.

> 磁盘存储器、磁带存储器和磁鼓存储器均属于磁表面存储器.

磁表面存储器的优点:

1. 存储容量大, 位价格低;
2. 记录介质可以重复使用;
3. 记录信息可以长期保存而不丢失, 甚至可以脱机存档;
4. 非破坏性读出, 读出时不需要再生.

磁表面存储器的缺点:

1. 存取速度慢;
2. 机械结构复杂;
3. 对工作环境要求较高.

## 1. 磁记录原理

原理:当磁头和磁性记录介质有相对运动时, 通过电磁转换完成读/写操作.

编码方法:按某种方案(规律), 把一连串的二进制信息变换成存储介质磁层中一个磁化翻转状态的序列, 并使读/写控制电路容易、可靠地实现转换.

磁记录方式:通常采用调频制(FM)和改进型调频制(MFM)的记录方式.

外存储器既可以作为输入设备, 也可以作为输出设备.(既可以存数据, 也可以读数据)

## 2. 磁盘设备的组成

### 存储区域:

一块硬盘含有若干个记录面, 每个记录面划分为若干条**磁道**,
而每条磁道又划分为若干个扇区, 扇区(也称块)是磁盘读写的最小单位, 也就是说磁盘按块存取.

- 磁头数(Heads): 即记录面数, 表示硬盘总共有多少个磁头, 磁头用于读取/写入盘片上记录面的信息, 一个记录面对应一个磁头.
- 柱面数(Cylinders): 表示硬盘每一面盘片上有多少条磁道. 在一个盘组中, 不同记录面的 相同编号(位置)的诸磁道构成一个圆柱面.
- 扇区数(Sectors): 表示每一条磁道上有多少个扇区.

### 硬盘存储器:

硬盘存储器由磁盘驱动器、磁盘控制器和盘片组成.

### 磁盘驱动器:

核心部件是磁头组件和盘片组件, 温彻斯特盘是一种可移动头固定盘片的硬盘存储器.

### 磁盘控制器:

是硬盘存储器和主机的接口, 主流的标准有IDE(ATA)、SCSI、SATA等.

## 3. 磁盘的性能指标

### 磁盘的容量:

一个磁盘所能存储的字节总数称为磁盘容量. 磁盘容量有非格式化容量和格式化容量之分.

- 非格式化容量是指磁记录表面可以利用的磁化单元总数.
- 格式化容量是指按照某种特定的记录格式所能存储信息的总量.

### 记录密度:

记录密度是指盘片单位面积上记录的二进制的信息量, 通常以道密度、位密度和面密度表示.

- 道密度是沿磁盘半径方向单位长度上的磁道数;
- 位密度是磁道单位长度上能记录的二进制代码位数;
- 面密度是位密度和道密度的乘积.

> 注意:磁盘所有磁道记录的信息量一定是相等的, 并不是圆越大信息越多, 故每个磁道的位密度都不同.

### 平均存取时间:

$$
\begin{equation}
	\begin{split}
		平均存取时间 =
		&寻道时间(磁头移动到目的磁道)+\\
		&旋转延迟时间(磁头定位到所在扇区)+\\
		&传输时间(传输数据所花费的时间)
	\end{split}
\end{equation}
$$

寻道时间和旋转延迟时间通常取平均值(最外道到最内道时间的一半, 磁盘转半圈的时间.)

### 数据传输率:

磁盘存储器在单位时间内向主机传送数据的字节数, 称为数据传输率.

假设磁盘转数为r(转/秒), 每条磁道容量为N个字节, 则数据传输率为$D_r=rN$

## 4. 磁盘地址

![[Pasted image 20250819161225.png]]

- 驱动器号
- 柱面(磁道)号
- 盘面(磁头)号
- 扇区号

## 5. 硬盘的工作过程

硬盘的主要操作是寻址、读盘、写盘. <BR>
每个操作都对应一个控制字, 硬盘工作时, 第一步是取控制字, 第二步是执行控制字. <BR>
硬盘属于机械式部件, 其读写操作是串行的, 不可能在同一时刻既读又写, 也不可能在同一时刻读两组数据或写两组数据.

# 磁盘矩阵RAID

RAID( Redundant Array of Inexpensive Disks, 廉价冗余磁盘阵列)
是将多个独立的物理磁盘组成一个独立的逻辑盘, 数据在多个物理盘上分割交叉存储、**并行访问**,
具有更好的存储性能、可靠性和安全性.

RAID的分级如下所示. 在RAID1～RAID5的几种方案中, 无论何时有磁盘损坏, 都可以随时拔出受损的磁盘再插入好的磁盘, 而数据不会损坏.

- RAID0:无冗余和无校验的磁盘阵列. 逻辑上相邻的两个扇区在物理上存到两个磁盘(条带化技术), 类比第三章"低位交叉编址的多体存储器".
- RAID1:镜像磁盘阵列. 有冗余、校验, 但浪费一半的存储容量.
- RAID2:采用纠错的海明码的磁盘阵列. 逻辑上连续的几个bit物理上分散存储在各个盘中4bit信息位+3bit海明校验位--可纠正一位错.
- RAID3:位交叉奇偶校验的磁盘阵列.
- RAID4:块交叉奇偶校验的磁盘阵列.
- RAID5:无独立校验的奇偶校验磁盘阵列.

RAID0把连续多个数据块交替地存放在不同物理磁盘的扇区中, 几个磁盘交叉并行读写, 不仅扩大了存储容量, 而且提高了磁盘数据存取速度, 但RAID0没有容错能力.

RAID1是为了提高可靠性, 使两个磁盘同时进行读写, 互为备份, 如果一个磁盘出现故障, 可从另一磁盘中读出数据. 两个磁盘当一个磁盘使用, 意味着容量减少一半.

