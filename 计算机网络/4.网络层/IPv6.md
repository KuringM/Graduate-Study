# IPv6

- IPv4地址的点分十进制记法: 总共32bit地址, 8bit为一段, 记录为十进制, 段间以小数点分隔
- IPv6地址的冒号十六进制记法: 总共128bit地址, 16bit为一段, 记录为十六进制, 段间以冒号分隔

## IPv6的特点

1. IPv6将地址从32位(4B)扩大到128位(16B), 更大的地址空间.
2. IPv6将IPv4的校验和字段彻底移除, 以減少每跳的处理时间.
3. IPv6将IPv4的可选字段移出首部, 变成了扩展首部, 成为灵活的首部格式, 路由器通常不对扩展首部进行检查, 大大提高了路由器的处理效率.
4. IPv6支持即插即用(即自动配置), 不需要DHCP协议.
5. IPv6首部长度必须是8B的整数倍, IPv4首部是4B的整数倍.
6. IPv6只能在主机处分片, IPv4可以在路由器和主机处分片.
7. ICMPv6:附加报文类型"分组过大".
8. IPv6支持资源的预分配, 支持实时视像等要求, 保证一定的带宽和时延的应用.
9. IPv6取消了协议字段, 改成下一个首部字段.
10. IPV6取消了总长度字段, 改用有效载荷长度字段.
11. IPv6取消了服务类型字段.

## IPv6地址

### 格式

- 总计 `128bit`, 采用 **冒号十六进制记法** (16位为一段, 共8段, 段间冒号分隔)
- **压缩记法**
  1. 去除每个分段的前导零 -- 每个16位段内的前导零可以省略
  2. 可用双冒号"::"替代连续出现的多个0 -- _注意一个地址中只能出现一次双冒号,否则会产生歧义_
     > - `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
     > - `2001:db8:85a3:0:0:8a2e:370:7334`
     > - `2001:db8:85a3::8a2e:370:7334`
- 一台主机的地址= `[n位前缀, 128-n 位接口标识符]`

### IPv6的地址分类

- **末指明地址** -- `::/128`
- **环回地址** -- `::1/128`
- **多播地址** -- `FF::/8`
- **本地链路单播地址** -- `FE8::/10`
- **全球单播地址** -- 除上述四种外的其他所有IPv6地址

![[Pasted image 20250830064833.png]]

#### 三类IPv6目的地址

IPv6 数据报的目的地址有以下三种基本类型:

1. **单播**(unicast): 就是传统的点对点通信.
2. **多播**(multicast): 一点对多点的通信, 数据报发送到一组计算机中的每一台. -- 应用: 网络会议.
3. **任播**(anycast): 这是 IPv6 增加的一种类型. 任播的终点是一组计算机, 但数据报只交付其中的一台计算机, 通常是距离最近的一台计算机. -- 应用: 多个DNS服务器共享一个任播地址
   > 注:任播地址没有固定的前缀, 通常由地址管理机构预先统一分配.

### IPv6地址资源的分配

- 支持无分类编址CIDR, 因此各级地址管理机构可以灵活划分子网大小
  > 例如 用CIDR记法表示→ 2001:0db8:abcd:0012::0/64
- IPv6因为地址空间很大, 所以可以划分为更多的层次
- _IPv6支持即插即用(IP地址自动配置)_
  > 一台主机接入网络后, 只需向路由器确认本网络前缀, 就可以给自己分配IP地址. <BR>
  > 通常以主机自身的MAC地址作为接口标识符
- _IPv6 可以不使用DHCP_.
  > 当然, 在一些IP地址安全性要求高的地方, 也支持使用 DHCP统一管理IPv6 地址

## 从IPv4向IPv6过度

1. 双协议栈
2. 隧道技术
