# IPv4分组

## 各种协议之间的服务关系

![[Pasted image 20250829213131.png]]

- IP协议(Internet Protocol, 网TCP协议 UDP协议际协议)是互联网的核心!
- ARP协议用于查询同一网络中的<主机IP地址, MAC地址>之间的映射关系
- ICMP协议用于网络层实体之间相互通知**异常事件**
- IGMP协议用于实现IP组播

## IP数据报(IP分组)的格式

![[Pasted image 20250829213717.png]]

![[截屏2025-08-29 21.52.59.png]]

![[截屏2025-08-29 22.09.49.png]]

## IP数据报的**分片**问题

重要概念: 一个链路层数据帧能承载的最大数据量称为**最大传送单元**(MTU). 如以太网的MTU=1500B

如果一个IP数据报的总长度超出了下一段链路的MTU, 就需要分片.

![[截屏2025-08-29 21.53.37.png]]

注意:

- IP数据报的**分片**可能在源主机、或任何一个路由器中发生
- 只有目的主机才会对分片进行**重组**
- 各分片有可能乱序到达目的主机
- 由于首部的**片偏移**字段是以×8B 为单位, 因此, _除了最后一个分片外, 其他每个分片的数据部分必须是8B的整数倍_
