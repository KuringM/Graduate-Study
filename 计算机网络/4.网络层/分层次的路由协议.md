# 分层次的路由协议

思考:RIP、OSPF 能否用于全世界范围的路由器?

- **RIP路由协议**: 基于**距离向量路由算法**. 路由器要把自身的"距离向量"告诉邻居们. 网络数量越多, 距离向量越大
- **OSPF路由协议**: 基于**链路状态路由算法**, 要求每一台路由器都要建立整个网络的拓扑图.
- 全世界的路由器数量、网络数量数以亿计, 不可能让每台路由器都知晓全世界的网络情况.

分层次的路由协议

- 将全世界的网络划分为多个相互独立的**自治系统**(Autonomous System).
- AS的管理单位有权决定在本自治系统内, 使用何种*内部路由协议(如:RIP、OSPF)*.
- 每个AS至少要有一台**自治系统边界路由器**(如 R6)与其他自治系统相连.
- 各**边界路由器**之间, 使用统一的*外部路由协议(如:BGP-4)*.
- 自治系统之间的路由选择也称**域间路由选择**, 自治系统内部的路由选择也称**域内路由选择**.

自治系统AS

- 全世界的互联网被划分为相互独立的自治系统 AS, 每个自治系统都有全球唯一的AS编号(**ASN**, Autonomous System Number)
- _自治系统之间是平级关系, 不存在包含关系_
- 一个自治系统通常包含一个或多个CIDR地址块(便于路由聚合)
- 每个AS至少有一台自治系统边界路由器和其他AS相连

## 路由协议的分类

### 内部网关协议(IGP, Interior Gateway Protocol)

- 用于自治系统(AS)内部的路由选择. 例如: RIP、OSPF 属于IGP
- 一个自治系统有权决定, 在本自治系统内使用哪种内部网关协议

### 外部网关协议(EGP, External Gateway Protocol)

- 用于自治系统之间的路由选择. 例如: BGP 属于 EGP
- 各个自治系统边界路由器之间, 统一使用BGP协议相互通信路由信息
