# 后退N帧协议(GBN, Go-Back-N)

- 滑动窗口机制: 多滑动窗口, 发送窗口$W_T> 1$, 接收窗口$W_R=1$
- 确认机制:
  - 确认帧: `ACKi`
  - 若接收方收到i号帧, 且没有检测出"差错", 需要给发送方返回确认帧 ACK_i
- 重传机制:
  - 超时重传 -- 若发送方超时未收到ACKi, 则重传i号帧
- 帧编号
  - 为了支持以上机制正确运行, 至少需要用 nbit 给帧"编号"
  - 要求: $W_T + W_R \leqslant 2^{n}$
- GBN 的特殊规则
  - 关于确认帧: 接收方可以**累积确认**: 即连续收到多个数据帧时, **可以仅返回最后一个帧的ACK**
    - ACK_i 表示接收方已收i号帧及其之前的所有帧
  - 关于**超时重传**: 若发送方超时未收到ACK_i, 则重传i号帧, 及其之后的所有帧
- 要点
  - 收到一个"非法帧"时, 接收方会将此帧丢弃, 并返回目前已接收的最后一个正确帧的ACK_i, 以提醒发送方"后退"回i+1(`(i+1)mod 2^n`)号帧重新发送
  - 注:"非法帧"包括落在接收窗口之外的帧、检测出差错的帧
  - 缺点:如果接收方接收帧的速度很慢, 或在信道误码率很高的情况下, 可能会导致发送方的发送进度经常需要"后退", 传输效率低下

为什么叫"后退N帧协议"? <BR>
原本已经发送了1号帧, 现在却"后退"回0号帧重新传送. 这样即可实现"流量控制"

如果不满足 $W_T + W_R \leqslant 2^{n}$ 会有什么问题? <BR>
若确认帧丢失, 则数据帧序号落在"接受窗口"之内的数据帧, 会被错误地接收.
