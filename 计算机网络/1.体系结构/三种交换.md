# 电路交换、报文交换、分组交换

## 电路交换(Circuit Switching)

通过物理线路的连接, 动态地分配传输线路资源. 如电话网络.

电路交换的过程:

1. 建立连接(尝试占用通信资源)
2. 通信(一直占用通信资源)
3. 释放连接(归还通信资源)

优点:

- 通信时延小
- 有序传输
- 没有物理信道争用冲突
- 实时性强

通信前从主叫端到被叫端建立一条*专用的物理通路*,
在通信的全部时间内, 两个用户*始终占用*端到端的*线路资源*. 数据直送, _传输速率高_.

> 电路交换更适用于:低频次、大量地传输数据

电路交换的缺点:

- _建立/释放连接_, 需要额外的*时间开销*.
  > 计算机之间数据往往是"突发式"传输, 即往往会高频次、少量地传输数据.
- *线路*被通信双方独占, _利用率低_.
- *线路*分配的*灵活性差*.
- 交换节点*不支持"差错控制"* (无法发现传输过程中的发生的数据错误)

## 报文交换

采用**存储转发**的思想:把传送的数据单元先存储进中间节点, 再根据目的地址转发至下一节点.

报文交换的优点:

- 通信前**无需建立连接**
- 数据以"**报文**"为单位被交换节点间"**存储转发**", 通信**线路可以灵活分配**
- 在通信时间内, 两个用户**无需独占**一整条物理线路. 相比于电路交换, **线路利用率高**
- 交换节点**支持"差错控制"**(通过校验技术)

报文交换的缺点:

- 报文不定长, 不方便存储转发管理
- 长报文的存储转发时间开销大、缓存开销大
- 长报文容易出错, 重传代价高

## 分组交换

将长报文(Message)划分成若干较小的等长数据段, 在数据段前面加上必要的控制信息组成首部(Header), 构成分组(Packet)

- 报文
- 头部: 即分组的控制信息, 包含:源地址、目的地址;分组号等
- 分组

> 现代计算机网络采用"分组交换"技术.

分组交换的优点:

- 通信前**无需建立连接**
- 数据以"**分组**"为单位被交换节点间"**存储转发**", 通信**线路可以灵活分配**
- 在通信时间内, 两个用户**无需独占**一整条物理线路. 相比于电路交换, **线路利用率高**
- 交换节点**支持"差错控制"**(通过校验技术)

相比于报文交换, 分组交换改进了如下问题:

- 分组定长, **方便存储转发管理**
- 分组的存储转发**时间开销小**、**缓存开销小**
- 分组不易出错, **重传代价低**

分组交换的缺点:

- 相比于报文交换, 控制**信息占比增加**
- 相比于电路交换, 依然**存在存储转发时延**
- 报文被拆分为多个分组, 传输过程中可能出现**失序、丢失**等问题, **增加处理的复杂度**

### "虚电路交换"技术

> 基于分组交换

虚电路交换的过程(将在第四章学习):

1. 建立连接(虚拟电路)
2. 通信(分组按序、按已建立好的既定线路发送, 通信双方不独占线路)
3. 释放连接

## 对比

|          功能           |          电路交换           | 报文交换 |      分组交换      |
| :---------------------: | :-------------------------: | :------: | :----------------: |
|    完成传输所需时间     | 最少(排除建立/释放连接耗时) |   最多   |        最少        |
|      存储转发时延       |             无              |   较高   |        较低        |
| 通信前是否需要建立连接? |             是              |    否    |         否         |
|        缓存开销         |             无              |    高    |         低         |
|    是否支持差错控制?    |           不支持            |   支持   |        支持        |
|    报文数据有序到达?    |             是              |    是    |         否         |
| 是否需要额外的控制信息  |             否              |    是    | 是(控制信息占比大) |
|     线路分配灵活性      |           不灵活            |   灵活   |      非常灵活      |
|       线路利用率        |             低              |    高    |       非常高       |
